<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8"/>
<title>GPS Heatmap Animation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  body {
    margin: 0;
    padding: 0;
    background: #210029;
  }
  #animate svg {
    width: 100%;
    height: 100%;
  }
  #animate svg path:hover {
    stroke: white;
    opacity: 1;
  }
  .octocat {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 30px;
    height: 30px;
  }
  .octocat path {
    fill: purple;
    opacity: 0.3;
  }
  .octocat:hover path {
    fill: white;
    opacity: 1;
  }
</style>
</head>
<body>

  <a href="http://github.com/andytlr/gps-heatmap-animation">
  <svg class="octocat" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
  <path d="M19.98,0C8.624,0.28,0.273,8.825,0,20.445c0.156,9.145,5.58,16.532,13.659,19.407c0.976,0.16,1.366-0.399,1.366-0.998
    l-0.039-3.794c-2.693,0.439-4.527,0.2-5.424-0.719c-0.937-0.918-1.366-1.478-1.288-1.677c-0.507-1.158-0.976-1.957-1.444-2.396
    c-0.507-0.439-0.741-0.639-0.78-0.599c-1.6-1.238-0.117-1.278,0.156-1.238c0.976,0.16,1.756,0.519,2.263,1.118
    s0.78,0.918,0.78,0.998c1.912,2.915,4.566,2.396,5.815,1.717c0.195-1.318,0.702-2.236,1.288-2.715
    c-4.644-0.319-8.898-2.476-9.093-10.103c0-2.236,0.78-4.073,2.068-5.471c-0.156-0.28-0.273-0.879-0.39-1.837
    s0.078-2.156,0.585-3.594c0-0.08,0.429-0.08,1.327,0.04s2.263,0.839,4.176,2.076c1.639-0.439,3.317-0.679,5.034-0.679
    c1.678,0,3.356,0.24,4.956,0.679c1.912-1.238,3.278-1.957,4.176-2.076c0.898-0.12,1.327-0.12,1.327-0.04
    c0.507,1.438,0.702,2.636,0.585,3.594c-0.117,0.958-0.234,1.557-0.39,1.837c1.288,1.438,2.068,3.235,2.068,5.471
    c-0.195,7.667-4.488,9.783-9.132,10.103c0.741,0.639,1.366,1.877,1.366,3.794l-0.039,5.63c0,0.599,0.39,1.158,1.366,0.998
    C34.42,37.097,39.844,29.71,40,20.565C39.727,8.945,31.337,0.28,19.98,0z"/>
  </svg>
  </a>

  <!-- Make a container for the SVG to append to -->
  <div id="animate">
    <div id="svgContainer"></div>
  </div>

  <!-- Append the SVG to the above container -->
  <script>
    xhr = new XMLHttpRequest();
    xhr.open("GET","source-data/Rplots.svg",false);
    // xhr.open("GET","source-data/Rplots-lots.svg",false);
    xhr.overrideMimeType("image/svg+xml");
    xhr.send("");
    document.getElementById("svgContainer")
      .appendChild(xhr.responseXML.documentElement);
  </script>

  <!-- Include D3 -->
  <script src="vendor/js/d3.v3.min.js" charset="utf-8"></script>

  <!-- Configure D3 -->
  <script type="text/javascript">
    // Speed of animation is defined by the length of the paths.
    // 1 is fast, 20 is quite slow. Choose a speed somewhere in the middle:
    var speed = 6

    var paths = d3.selectAll("#animate path");
    var previousLength = 0

    paths.each(function (d, i) {
      var totalLength = this.getTotalLength();

      path = d3.select(this)
        .attr("stroke-dasharray", totalLength + " " + totalLength)
        .attr("stroke-dashoffset", totalLength)
        .attr("stroke", "white")
        .attr("opacity", "1")
        .attr("fill", "none")
        .attr("stroke-width", "0.25")
        .transition()
          .duration(totalLength * speed)
          .delay(previousLength * speed)
          .ease("linear")
          .attr("stroke-dashoffset", 0)

      path
        // These are the "transition to" attributes.
        .attr("stroke", "purple")
        .attr("opacity", "0.3")

      previousLength = previousLength + totalLength
    });
  </script>

</body>
</html>
